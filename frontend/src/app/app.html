<header class="app-header d-flex justify-content-between align-items-center px-4 py-3 border-bottom sticky-top" style="background: rgba(2, 6, 23, 0.95);">
  <div class="brand d-flex align-items-center gap-2" style="cursor: pointer;" routerLink="/">
    <div class="brand-logo" style="width: 44px; height: 44px; background: var(--primary-gradient); border-radius: 12px; display: grid; place-items: center; box-shadow: var(--neon-glow);">
      <i class="bi bi-lightning-charge-fill text-white h5 mb-0"></i>
    </div>
    <span class="brand-font h4 mb-0" style="color: #ffffff; font-weight: 900; letter-spacing: 2px;">ANIME<span style="color: var(--primary);">HUB</span></span>
  </div>

  <nav class="app-nav d-none d-lg-flex align-items-center gap-3" *ngIf="isLoggedIn()">
    <a routerLink="/posts" routerLinkActive="is-active" class="nav-link">FEED</a>
    <a routerLink="/explore" routerLinkActive="is-active" class="nav-link">EXPLORE</a>
    <a routerLink="/notifications" routerLinkActive="is-active" class="nav-link position-relative">
      NOTIFICATIONS
      <span *ngIf="unreadCount() > 0" class="badge position-absolute top-0 start-100 translate-middle p-1 rounded-circle" style="font-size: 0.6rem; min-width: 18px; border: 2px solid var(--bg);">{{ unreadCount() }}</span>
    </a>
    <a routerLink="/profile" routerLinkActive="is-active" class="nav-link">PROFILE</a>
    <div class="vr mx-2 text-white opacity-10"></div>
    <a routerLink="/settings" routerLinkActive="is-active" class="nav-link" title="Settings">
      <i class="bi bi-gear-fill"></i>
    </a>
    <a *ngIf="isAdmin()" routerLink="/admin" routerLinkActive="is-active" class="btn btn-sm btn-danger px-3">ADMIN</a>
    <button (click)="logout()" class="btn btn-sm btn--ghost text-danger fw-bold">
      LOGOUT
    </button>
  </nav>

  <nav class="app-nav d-flex gap-2" *ngIf="!isLoggedIn()">
    <a routerLink="/login" class="btn btn--ghost px-4">Sign In</a>
    <a routerLink="/register" class="btn btn-primary px-4">Get Started</a>
  </nav>

  <!-- Mobile Nav Trigger -->
  <button class="btn btn--ghost d-lg-none" *ngIf="isLoggedIn()" (click)="toggleMobileMenu()">
    <i class="bi" [class.bi-list]="!mobileMenuOpen()" [class.bi-x-lg]="mobileMenuOpen()" style="font-size: 1.5rem;"></i>
  </button>
</header>

<!-- Mobile Menu Overlay -->
<div class="mobile-menu d-lg-none" [class.is-open]="mobileMenuOpen()" *ngIf="isLoggedIn()">
  <div class="menu-backdrop" (click)="toggleMobileMenu()"></div>
  <nav class="menu-content card p-4">
    <div class="brand-font h5 mb-4 text-center">MENU</div>
    <div class="d-grid gap-3">
      <a routerLink="/posts" routerLinkActive="is-active" class="nav-link">
        <i class="bi bi-postcard-heart-fill me-2"></i> FEED
      </a>
      <a routerLink="/explore" routerLinkActive="is-active" class="nav-link">
        <i class="bi bi-compass-fill me-2"></i> EXPLORE
      </a>
      <a routerLink="/notifications" routerLinkActive="is-active" class="nav-link">
        <i class="bi bi-bell-fill me-2"></i> NOTIFICATIONS
        <span *ngIf="unreadCount() > 0" class="badge ms-2">{{ unreadCount() }}</span>
      </a>
      <a routerLink="/profile" routerLinkActive="is-active" class="nav-link">
        <i class="bi bi-person-circle me-2"></i> PROFILE
      </a>
      <a routerLink="/settings" routerLinkActive="is-active" class="nav-link">
        <i class="bi bi-gear-fill me-2"></i> SETTINGS
      </a>
      <hr class="my-2 opacity-10">
      <a *ngIf="isAdmin()" routerLink="/admin" class="btn btn-danger w-100">ADMIN PANEL</a>
      <button (click)="logout()" class="btn btn--ghost text-danger w-100 fw-bold">
        LOGOUT
      </button>
    </div>
  </nav>
</div>

<main class="app-main">
  <router-outlet />
</main>

<footer class="py-5 mt-5 border-top" style="background: rgba(15, 23, 42, 0.4);">
  <div class="container text-center">
    <div class="brand-font h5 mb-3" style="letter-spacing: 2px;">ANIME<span style="color: var(--primary);">HUB</span></div>
    <p class="text-muted small mb-0 fw-bold">© 2026 ANIMEHUB • THE ULTIMATE FAN COMMUNITY.</p>
  </div>
</footer>
